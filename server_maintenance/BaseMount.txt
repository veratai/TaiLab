#FYI, I have two accounts, one in the US and one in Canada
#but using the same login info
US:  https://basespace.illumina.com/dashboard
CA:  https://cac1.sh.basespace.illumina.com/dashboard
#new data is being deposited in Canadian account


#downloading data from BaseSpace using Linux
#using BaseMount

#make sure ownership of data is transferred to me, vtai4@uwo.ca

#BaseMount info:
https://help.basespace.illumina.com/cmd-line-interfaces/basespace-cli/introduction-to-basemount

#BaseSpace CLI info:
#https://developer.basespace.illumina.com/docs/content/documentation/cli/cli-overview

#login to server
ssh vera@cardinal.biology.uwo.ca

#make new directory in /data/seqarchive/
mkdir /data/seqarchive/ZoopQuadra/2019Dec_18SV4UNonMet_QU39_ZP/

#change ownership and write mode for the directory
sudo chown root:vera /data/seqarchive/ZoopQuadra/2019Dec_18SV4UNonMet_QU39_ZP/
sudo chmod 775 /data/seqarchive/ZoopQuadra//2019Dec_18SV4UNonMet_QU39_ZP/


#mount ~/BaseSpace via basemount (login info already set?)
basemount BaseSpace

#fastq files are in Projects, pick Project, in Samples

cd BaseSpace/Projects/QU39_ZP/Samples

#use bash loop to download/copy fastq files

for d in */ ; do
    echo "$d"
    cp $d/Files/* /data/seqarchive/ZoopQuadra/2019Dec_18SV4UNonMet_QU39_ZP/
done

/data/seqarchive/ginseng16SV4/ginseng16SV4_year123_site1_2022_11_25
#unmount
cd ~
basemount --unmount BaseSpace

#remove write privileges to users
sudo chmod 755 /data/seqarchive/ZoopQuadra//2019Dec_18SV4UNonMet_QU39_ZP/


### Need new authentification because new data now being deposited to a Canadian server
#https://cac1.sh.basespace.illumina.com
#and not https://basespace.illumina.com

mkdir ~/BaseMountCA

#create config file to specify Candian API site, and authenticate
basemount --config ca --api-server https://api.cac1.sh.basespace.illumina.com BaseSpaceCA

#mounting Canadian BaseSpace
basemount --config ca BaseSpaceCA

#do as above to download data